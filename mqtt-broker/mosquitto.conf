# Mosquitto MQTT Broker Configuration
# Starlight Network Monitor

# ===========================================
# Listener Configuration
# ===========================================

# Default MQTT port
listener 1883
protocol mqtt

# WebSocket listener (for browser-based clients if needed)
listener 9001
protocol websockets

# ===========================================
# Security Configuration
# ===========================================

# Allow anonymous connections (for local network use)
# In production, consider enabling authentication
allow_anonymous true

# Uncomment to enable password authentication
# password_file /mosquitto/config/passwords.txt

# ===========================================
# Persistence Configuration
# ===========================================

# Enable persistence for message retention
persistence true
persistence_location /mosquitto/data/

# ===========================================
# Logging Configuration
# ===========================================

# Log to file and stdout
log_dest file /mosquitto/log/mosquitto.log
log_dest stdout

# Log types
log_type error
log_type warning
log_type notice
log_type information

# Connection logging
connection_messages true

# ===========================================
# Performance Configuration
# ===========================================

# Maximum queued messages
max_queued_messages 1000

# Message size limit (256KB should be plenty for status messages)
message_size_limit 262144

# ===========================================
# Topic Configuration
# ===========================================

# Topics used by Starlight:
# - network/probes/+/status     : Probe status updates
# - network/probes/+/heartbeat  : Probe heartbeat messages
# - network/probes/+/internet   : Internet connectivity status
# - network/system/alerts       : System-wide alerts

